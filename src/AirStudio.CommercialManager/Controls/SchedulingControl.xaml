<UserControl x:Class="AirStudio.CommercialManager.Controls.SchedulingControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:AirStudio.CommercialManager.Controls"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="900">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="SCHEDULE COMMERCIAL" FontWeight="Bold" FontSize="16"
                   Foreground="#B0C4DE" Margin="0,0,0,16"/>

        <!-- Schedule Details Form -->
        <Border Grid.Row="1" Style="{StaticResource CardPanel}" Margin="0,0,0,12">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Time -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Transmission Time:"
                           Foreground="#B0C4DE" VerticalAlignment="Center" Margin="0,0,0,12"/>
                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,12">
                    <TextBox x:Name="HourTextBox" Width="50" Height="32" Text="00"
                             MaxLength="2" TextAlignment="Center"
                             VerticalContentAlignment="Center"
                             PreviewTextInput="TimeTextBox_PreviewTextInput"
                             TextChanged="TimeTextBox_TextChanged"/>
                    <TextBlock Text=":" Foreground="#B0C4DE" FontSize="18"
                               VerticalAlignment="Center" Margin="4,0"/>
                    <TextBox x:Name="MinuteTextBox" Width="50" Height="32" Text="00"
                             MaxLength="2" TextAlignment="Center"
                             VerticalContentAlignment="Center"
                             PreviewTextInput="TimeTextBox_PreviewTextInput"
                             TextChanged="TimeTextBox_TextChanged"/>
                    <TextBlock Text=":" Foreground="#B0C4DE" FontSize="18"
                               VerticalAlignment="Center" Margin="4,0"/>
                    <TextBox x:Name="SecondTextBox" Width="50" Height="32" Text="00"
                             MaxLength="2" TextAlignment="Center"
                             VerticalContentAlignment="Center"
                             PreviewTextInput="TimeTextBox_PreviewTextInput"
                             TextChanged="TimeTextBox_TextChanged"/>
                </StackPanel>

                <!-- From Date -->
                <TextBlock Grid.Row="0" Grid.Column="2" Text="From Date:"
                           Foreground="#B0C4DE" VerticalAlignment="Center" Margin="20,0,0,12"/>
                <DatePicker Grid.Row="0" Grid.Column="3" x:Name="FromDatePicker"
                            Height="32" Margin="0,0,0,12"
                            SelectedDateChanged="DatePicker_SelectedDateChanged"/>

                <!-- To Date -->
                <TextBlock Grid.Row="1" Grid.Column="2" Text="To Date:"
                           Foreground="#B0C4DE" VerticalAlignment="Center" Margin="20,0,0,12"/>
                <DatePicker Grid.Row="1" Grid.Column="3" x:Name="ToDatePicker"
                            Height="32" Margin="0,0,0,12"
                            SelectedDateChanged="DatePicker_SelectedDateChanged"/>

                <!-- Repeat Info -->
                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,12">
                    <TextBlock Text="Repeat Days:" Foreground="#607D8B" VerticalAlignment="Center"/>
                    <TextBlock x:Name="RepeatDaysLabel" Text="0" Foreground="#5A8FC4"
                               FontWeight="SemiBold" VerticalAlignment="Center" Margin="8,0,0,0"/>
                    <TextBlock x:Name="RepeatInfoLabel" Text="" Foreground="#607D8B"
                               FontStyle="Italic" VerticalAlignment="Center" Margin="8,0,0,0"/>
                </StackPanel>

                <!-- User Name -->
                <TextBlock Grid.Row="2" Grid.Column="0" Text="User Name:"
                           Foreground="#B0C4DE" VerticalAlignment="Center" Margin="0,0,0,12"/>
                <TextBox Grid.Row="2" Grid.Column="1" x:Name="UserNameTextBox"
                         Height="32" Margin="0,0,0,12"
                         VerticalContentAlignment="Center"/>

                <!-- Mobile Number -->
                <TextBlock Grid.Row="2" Grid.Column="2" Text="Mobile No:"
                           Foreground="#B0C4DE" VerticalAlignment="Center" Margin="20,0,0,12"/>
                <TextBox Grid.Row="2" Grid.Column="3" x:Name="MobileNoTextBox"
                         Height="32" Margin="0,0,0,12"
                         VerticalContentAlignment="Center"/>

                <!-- Capsule Summary -->
                <TextBlock Grid.Row="3" Grid.Column="0" Text="Capsule:"
                           Foreground="#B0C4DE" VerticalAlignment="Center"/>
                <StackPanel Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal">
                    <TextBlock x:Name="CapsuleNameLabel" Text="--"
                               Foreground="#E0E6ED" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    <TextBlock x:Name="CapsuleInfoLabel" Text=""
                               Foreground="#607D8B" VerticalAlignment="Center" Margin="12,0,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Capsule Segments List -->
        <Border Grid.Row="2" Style="{StaticResource CardPanel}" Margin="0,0,0,12">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="CAPSULE CONTENTS" FontWeight="Bold"
                           Foreground="#B0C4DE" Margin="0,0,0,8"/>

                <DataGrid Grid.Row="1" x:Name="SegmentsGrid"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          IsReadOnly="True"
                          SelectionMode="Single">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="#" Binding="{Binding Order}" Width="40"/>
                        <DataGridTextColumn Header="Spot Name" Binding="{Binding Commercial.Spot}" Width="150"/>
                        <DataGridTextColumn Header="Title" Binding="{Binding Commercial.Title}" Width="*"/>
                        <DataGridTextColumn Header="Agency" Binding="{Binding Commercial.Agency}" Width="150"/>
                        <DataGridTextColumn Header="Duration" Binding="{Binding Duration, StringFormat='{}{0:hh\\:mm\\:ss}'}" Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>

        <!-- Preview -->
        <Border Grid.Row="3" Background="#0D1B2A" CornerRadius="6" Height="120" Margin="0,0,0,12">
            <controls:WaveformViewer x:Name="PreviewWaveform"/>
        </Border>

        <!-- Action Buttons -->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Validation message -->
            <TextBlock Grid.Column="0" x:Name="ValidationLabel"
                       Foreground="#FF6B6B" VerticalAlignment="Center"/>

            <Button Grid.Column="1" x:Name="EditCapsuleButton" Content="Edit Capsule"
                    Click="EditCapsuleButton_Click" Width="100" Margin="0,0,8,0"/>
            <Button Grid.Column="2" x:Name="PreviewButton" Content="Preview TAG"
                    Click="PreviewButton_Click" Width="100" Margin="0,0,8,0"/>
            <Button Grid.Column="3" x:Name="ScheduleButton" Content="Schedule"
                    Click="ScheduleButton_Click" Width="120"
                    Style="{StaticResource PrimaryButtonStyle}"/>
        </Grid>
    </Grid>
</UserControl>
